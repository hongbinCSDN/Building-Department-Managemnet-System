@model MWMS2.Areas.Registration.Models.Fn07CNV_CNVSearchModel

@if (MWMS2.Utility.AuthUtil.CanList)
{

    <div class="panelHeader">Search Criteria</div>
    <div id="searchCriteria">
        @Html.HiddenFor(x => x.doSearch)
        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">HKID :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.HKID)
                </div>
            </div>
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Passport No. :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.PassportNo)
                </div>
            </div>
        </div>
        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Surnname :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.Surname)
                </div>
            </div>
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Given Name :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.GivenName)
                </div>
            </div>
        </div>
        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Chinese Name :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.ChiName)
                </div>
            </div>

        </div>
        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">BR No. :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.BRNo)
                </div>
            </div>
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Proprietor Name :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.ProprietorName)
                </div>
            </div>
        </div>

        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Company Name :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.ComName)
                </div>
            </div>
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Ordinance / Regulation :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.OrdReg)
                </div>
            </div>
        </div>

        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Suspension Reason :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.SuspReason)
                </div>
            </div>
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Conviction Source :</div>
                <div class="w3-col l6 m12 s12">
                    @*@Html.TextBoxFor(model => model.CnvSource)*@
                    @Html.DropDownListFor(model => model.CnvSource, Model.RetrieveCNVSORUCE())

                </div>
            </div>
        </div>

        <div class="w3-row">
            <div class="w3-col l12 m12 s12">
                <div class="w3-col l3 m12 s12">Date of Offence :</div>
                <div class="w3-col l9 m12 s12">
                    &nbsp;From&nbsp;@Html.TextBoxFor(model => model.FromDateOfOffence, "", new { @class = "inputDate" })
                    &nbsp;To&nbsp;@Html.TextBoxFor(model => model.ToDateOfOffence, "", new { @class = "inputDate" })
                </div>
            </div>

        </div>

        <div class="w3-row">
            <div class="w3-col l12 m12 s12">
                <div class="w3-col l3 m12 s12">Date of Judgement :</div>
                <div class="w3-col l9 m12 s12">
                    &nbsp;From&nbsp;@Html.TextBoxFor(model => model.FromDateOfJudgement, "", new { @class = "inputDate" })
                    &nbsp;To&nbsp; @Html.TextBoxFor(model => model.ToDateOfJudgement, "", new { @class = "inputDate" })
                </div>
            </div>

        </div>

        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Reference :</div>
                <div class="w3-col l6 m12 s12">
                    @Html.TextBoxFor(model => model.Ref)
                </div>
            </div>

        </div>
        <div class="w3-row">
            <div class="w3-col l6 m12 s12">
                <div class="w3-col l6 m12 s12">Conviction Type :</div>
                <div class="w3-col l6 m12 s12">
                    <select name="CnvType">
                        <option value="">-- Select --</option>
                        <option value="Individual">Individual</option>
                        <option value="Company">Company</option>
                    </select>
                </div>
            </div>

        </div>
        <div class="w3-container footer">


            <button type="button" class="btn btn-default w3-left" onclick="goTo('CreateNewConv')" name="NewConviction" value="New Conviction"><i class="far fa-plus-square"></i> New Conviction</button>

            @*<button class="" type="button"><i class="far fa-plus-square"></i> New Member</button>*@
            @*<button class="btn btn-default w3-left" onclick="window.location='/Registration/FN07CNV_CNV/CreateNew'" name="NewConviction" value="New Conviction"><i class="far fa-plus-square"></i> New Conviction</button>*@
            @*<button onclick="window.location='/Registration/FN07CNV_CNV/Import'" name="ImportLD" value="Import LD">Import LD</button>
                <button onclick="window.location='/Registration/FN07CNV_CNV/Import'" name="ImportFEHD" value="Import FEHD">Import FEHD</button>
                <button onclick="window.location='/Registration/FN07CNV_CNV/Import'" name="ImportEPD" value="Import EPD">Import EPD</button>*@

            <!--window.location='/Registration/Fn07CNV_CNV/Import?ImportType=LD'-->
            <button class="btn btn-default w3-left" onclick="goTo('ImportView', [{ name: 'ImportType', value: 'LD' }])"
                    name="ImportLD" value="Import LD">
                <i class="far fa-plus-square"></i> Import LD
            </button>
            <!--window.location='/Registration/Fn07CNV_CNV/Import?ImportType=FEHD'-->
            <button class="btn btn-default w3-left" onclick="goTo('ImportView', [{ name: 'ImportType', value: 'FEHD' }])"
                    name="ImportFEHD" value="Import FEHD">
                <i class="far fa-plus-square"></i> Import FEHD
            </button>
            <!--window.location='/Registration/Fn07CNV_CNV/Import?ImportType=EPD'-->
            <button class="btn btn-default w3-left" onclick="goTo('ImportView', [{ name: 'ImportType', value: 'EPD' }])"
                    name="ImportEPD" value="Import EPD">
                <i class="far fa-plus-square"></i> Import EPD
            </button>
            <button class="searchButton btn btn-default" type="button"><i class="fa fa-search"></i> Search</button>
            <button class="resetButton btn btn-default" type="button"><i class="fa fa-eraser"></i> Clear</button>
            @*<a href="http://localhost:50194" style="float:right">Back to Main Page</a>*@


        </div>
    </div>

    <div id="resultPanel"></div>


    if (MWMS2.Utility.AuthUtil.CanViewDetails)
    {
        <script type="text/javascript">function ViewDetail(row) { goTo("Form", [{ name: "id", value: row.UUID }, { name: "type", value: row.CONVICTIONTYPE }]); }</script>
    }
    else
    {
        <script type="text/javascript">function ViewDetail(row) { }</script>
    }

    <script type="text/javascript">

        var resultT;
        domReady(function () {
            resultT = new searcher({
                searchPath: "Search"
                , exportPath: "Excel"
                , searchTable: "searchCriteria"
                , resultPanel: "resultPanel"
                , Sort: "NAME"
                , Columns: [
                    { displayName: "Conviction Type", columnName: "CONVICTIONTYPE" },
                    { displayName: "BR No.", columnName: "BR_NO" },
                    {
                        displayName: "Name", columnName: "NAME"
                        , click: function (row) {
                            try {
                                if (row == null) return;
                                ViewDetail(row);
                            } catch (err) { }
                        }
                    }

                    , { displayName: "Ordinance/ Regulation", columnName: "CR_SECTION" }
                    , { displayName: " Date of Offence", columnName: "CR_OFFENCE_DATE" }
                    , { displayName: " Date of Judgement", columnName: "CR_JUDGE_DATE" }
                    , { displayName: " HKID/ Passport No.", columnName: "HKID" }
                    , { displayName: "Company Name", columnName: "ENGLISH_NAME" }
                    , { displayName: " Accident (A)/Fatal(F)", columnName: "ACCIDENTFATAL" }
                    , { displayName: " Reference", columnName: "REFERENCE" }
                    , { displayName: " Type", columnName: "RECORD_TYPE" }
                ]
            }
            );

        });
    </script>

}
else
{
    <b>Access denied, please contact your supervisor.</b>
}


